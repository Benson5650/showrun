name: Deploy GitHub Pages

on:
  push:
    branches: [ main ]

# 設定必要的權限
permissions:
  contents: read    # 讀取程式碼權限
  pages: write      # 部署 GitHub Pages 的寫入權限
  id-token: write   # 用來驗證部署來源

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # 檢出程式碼
      - name: Checkout repository
        uses: actions/checkout@v3

      # 建立 public 資料夾，並將 html/index.html 複製進去
      - name: Prepare deployment files
        run: |
          mkdir -p public
          cp html/index.html public/

      # 上傳 public 資料夾作為部署產物
      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: public

      # 部署至 GitHub Pages
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v3
